<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tu Jard√≠n para Mam√°</title>
    <style>
        /* [Mant√©n todos los estilos igual que antes] */
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- [Mant√©n todo el HTML igual que antes] -->

    <script>
        // Elementos del DOM
        const gardenPreview = document.getElementById('gardenPreview');
        const letterContent = document.getElementById('letterContent');
        const letterPhotosContainer = document.getElementById('letterPhotosContainer');
        const musicControl = document.getElementById('musicControl');
        const backgroundMusic = document.getElementById('backgroundMusic');
        
        let isMusicPlaying = false;
        let gardenData = {};
        let currentPhotoUrl = '';
        
        // Tipos de flores (debe coincidir con la p√°gina principal)
        const flowerTypes = ['üåπ', 'üå∏', 'üå∫', 'üåª', 'üåº', 'üå∑', 'üíê', 'üèµÔ∏è'];
        
        // Cargar datos
        function loadData() {
            // Obtener datos de sessionStorage
            const savedData = sessionStorage.getItem('mothersDayData');
            
            if (savedData) {
                gardenData = JSON.parse(savedData);
            } else {
                // Datos por defecto si no hay nada
                gardenData = {
                    flowers: [
                        { type: 'flower', content: 1, x: 100, y: 100, size: 30, color: '#E91E63' },
                        { type: 'flower', content: 3, x: 200, y: 150, size: 35, color: '#FF9800' }
                    ],
                    photos: [],
                    letter: "Querida mam√°,\n\nEste es un regalo especial para ti.\n\nTe amo mucho.",
                    additionalPhotos: []
                };
            }
            
            renderGarden();
            renderLetter();
            setupPhotoViewer();
            createButterflies(3);
        }

        // [Mant√©n todas las dem√°s funciones igual que antes]
        
        // Inicializar
        musicControl.addEventListener('click', toggleMusic);
        backgroundMusic.volume = 0.3;
        
        // Intentar reproducci√≥n autom√°tica
        document.body.addEventListener('click', () => {
            backgroundMusic.play().then(() => isMusicPlaying = true)
                .catch(e => console.log("Autoplay bloqueado:", e));
        }, { once: true });
        
        window.addEventListener('load', loadData);
    </script>
</body>
</html>
